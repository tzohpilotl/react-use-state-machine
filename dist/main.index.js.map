{"version":3,"sources":["webpack://useStateMachine/webpack/universalModuleDefinition","webpack://useStateMachine/./src/index.ts","webpack://useStateMachine/./src/useStateMachine.ts","webpack://useStateMachine/external \"react\""],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVa;AACb,8CAA8C,cAAc;AAC5D,wBAAwB,mBAAO,CAAC,mDAAmB;AACnD;;;;;;;;;;;;;ACHa;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA,cAAc,mBAAO,CAAC,oBAAO;AAC7B;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB,iCAAiC,sBAAsB;AAC3G,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB,yBAAyB,kBAAkB,YAAY,EAAE,EAAE;AAC/G,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpEA,mD","file":"main.index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"useStateMachine\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"useStateMachine\"] = factory(root[\"react\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_react__) {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar useStateMachine_1 = require(\"./useStateMachine\");\nexports.default = useStateMachine_1.useStateMachine;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useStateMachine = void 0;\nvar react_1 = require(\"react\");\nfunction buildGraph(edges) {\n    return edges.reduce(function (acc, _a) {\n        var _b, _c;\n        var from = _a.from, to = _a.to, via = _a.via;\n        return (__assign(__assign({}, acc), (_b = {}, _b[from] = __assign(__assign({}, acc[from]), (_c = {}, _c[via] = to, _c)), _b)));\n    }, {});\n}\nfunction createReducer(states, graph) {\n    return function (state, action) {\n        var currentStateTransitions = graph[state.name];\n        if (!currentStateTransitions ||\n            !currentStateTransitions.hasOwnProperty(action.type)) {\n            return state;\n        }\n        var nextState = currentStateTransitions[action.type];\n        return states[nextState];\n    };\n}\nfunction generateMutations(edges, dispatch) {\n    return edges.reduce(function (acc, _a) {\n        var _b;\n        var via = _a.via;\n        return (__assign(__assign({}, acc), (_b = {}, _b[via] = function () { return dispatch({ type: via }); }, _b)));\n    }, {});\n}\nfunction getInitialState(states) {\n    var stateName = Object.keys(states)[0];\n    return states[stateName];\n}\nfunction useStateMachine(_a) {\n    var states = _a.states, edges = _a.edges;\n    var graph = buildGraph(edges);\n    var reducer = createReducer(states, graph);\n    var _b = __read(react_1.useReducer(reducer, getInitialState(states)), 2), state = _b[0], dispatch = _b[1];\n    var mutations = generateMutations(edges, dispatch);\n    return [state.state, mutations];\n}\nexports.useStateMachine = useStateMachine;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}